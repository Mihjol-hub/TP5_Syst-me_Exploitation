# TP5_Syst-me_Exploitation
Sockets Projet de Jeu d'Adivination (TP5 - Systèmes d'Exploitation)

Ce projet est une implèmentation d'un jeu d'aivination basé sur une architecture client-serveur utilisant des **Sockets** en langage de programmation C sous Linux. 

## Description 
Le jeu consiste pour le client à diviner un nombre secret généré aléatoirement par le serveur.
- Le serveur multitreadé  peut gérer plusieurs clients simultanément, chacun avec sa propre session de jeu.
- Les communications respectent un protocole précis où le serveur répond aux propositions du client avec des messages tels que: 
  - **Trop bas** (TOO_LOW)
  - **Trop haut** (TOO_HIGH)
  - **Gagné** (WIN)
  - **Perdu** (LOSE)

## Structure des Fichiers
Le projet contient les fichiers suivants :

- **`client.c`** : Le script du client, qui se connecte au serveur, envoie des propositions et reçoit des réponses.
- **`server.c`** : Le serveur basique qui gère un seul client à la fois.
- **`server_multithread.c`** : Le serveur multithreadé capable de gérer plusieurs clients simultanément.
- **`Makefile`** : Automatisation de la compilation et de l'exécution des programmes.

## Compilation
Un **Makefile** est fourni pour simplifier la compilation. Suivez les étaapes ci-dessous :

1. **Compilation du client et du serveur multithreadé** :
```bash
make
```

Cela va générer les exécutables suivantes : 
* client 
* server_multithread

2. **Pour compiler uniquement le client :** 
```bash
make client
```

3. **Pour compiler uniquement le serveur basique:**
```bash
make server 
```

4. **Pour compiler uniquement le serveur multithreadé:**
```bash
make server_multithread
```

5. **Nettoyage des fichiers compilés:**
```bash
amke clean
```

6. **Recompilation complète:**
```bash
make rebuild
```

## lancement des Programmes 
1. **Lancer le serveur multithreadé:
Dans une première terminale, exécutez la commande suivante:
```bash
make run_server
```

**En suite la sortie que s'afichera sera similaire à:**
```cs
Running the multithreaded server...
Server is listening on port 65100...
Client connected with IP: 127.0.0.1
The secret number is: 85
```

2. **Lancer le client :**
```bash
make run_client

```

**Le client afichera:**
```css
connected to the server at 127.0.0.1:65100
Guess a number between 1 and 100 
Enter your guess:
```

3. **Jouer**
Entrez des nombres pour deviner le numéro secret. Le serveur répondra avec :
* Trop bas si votre nombre est inférieur au numéro secret. 
* Trop haut si votre nombre est supérieur au numéro secret. 
* Gagné si vous devinez correctement
* Perdu arpès 5 essais infructueux 

Il est possible d'ouvrir plusieur terminales pour lancer plusieur clients simultaément. 

Exemples d'Exéccution 

**Serveur Multithreadé :**
```arduino
Running the  multithreaded server...
Server is listening on port 65100...
Client connected with IP: 127.0.0.1
The secret number is: 82
Client connected with IP: 127.0.0.1
The secret number is: 99
Client guessed: 100
Client guessed: 10
Client lost the game
Client disconnected
```

**Client**
```yaml
Connected to the server at 127.0.0.1:65100
Guess a number between 1 and 100
Enter your guess: 50
Proposition sent: 50
Server says: Too low!
Enter your guess: 80
Proposition sent: 80
Server says: Too high!
Enter your guess: 70
Proposition sent: 70
Server says: You won! The number was 70
Connection closed.
```

**Protocole de Communication**

Le client et le serveur échangent des messages de 2 octets :

Serveur vers Client :
    Premier octet : réponse (TOO_LOW, TOO_HIGH, WIN, LOSE).
    Deuxième octet : valeur pour le débogage (ex. numéro secret).

Client vers Serveur :
    Premier octet : ignoré par le serveur.
    Deuxième octet : proposition du client.

## Bibliographie
https://www.youtube.com/watch?v=_lQ-3S4fJ0U&list=PLPyaR5G9aNDvs6TtdpLcVO43_jvxp4emI
Donahoo, M. J., & Calvert, K. L. (2009). TCP/IP Sockets in C: Practical Guide for Programmers (2nd ed.). Morgan Kaufmann.
